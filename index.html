<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿Qué prefieres?</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <h1>¿Qué prefieres?</h1>

        <!-- Selector de categorías -->
        <div id="category-selector">
            <label for="categories">Elige una categoría:</label>
            <select id="categories">
                <option value="" disabled selected>Selecciona una categoría</option>
                <option value="pokemonprimera">Pokémon Primera Generación</option>
                <option value="comidas">Comidas</option>
                <option value="equipos">Equipos de fútbol</option>
                <option value="rupaulUSA">Queens de RuPaul USA</option>
                <option value="rupaulUK">Queens de RuPaul UK</option>
                <option value="aleatorio">Modo Aleatorio</option>
                <option value="dificil">Modo Difícil</option>
                <!-- Puedes agregar más categorías -->
            </select>
            <button id="start-btn" onclick="startGame()" disabled>Comenzar Juego</button>
            <p id="error-message" style="color:red; display:none;">Selecciona una categoría antes de comenzar</p>
        </div>

        <!-- Área del juego donde aparecerán las opciones -->
        <div id="game-area" style="display: none;">
            <div id="option1" class="card" onclick="selectOption('option1')"></div>
            <div id="option2" class="card" onclick="selectOption('option2')"></div>
        </div>

        <!-- Mensaje de nueva ronda -->
        <div id="round-message" class="round-message">¡Comienza la nueva ronda de ganadores!</div>

        <!-- Pantalla de ganador -->
        <div id="winner-screen" style="display: none;">
            <h2 id="winner-text">¡El ganador es!</h2>
            <div id="winner-name"></div>
            <h3>Top 3 Finalistas</h3>
            <ul id="finalists-list"></ul>
            <h3>Eliminados:</h3>
            <ul id="eliminated-list"></ul>
            <button onclick="resetGame()">Jugar de nuevo</button>
        </div>
    </div>

    <!-- Efectos de sonido -->
    <audio id="select-sound" src="select.mp3"></audio>

    <script>
        const categories = {
            pokemonprimera: ['Pikachu', 'Charizard', 'Eevee', 'Bulbasaur', 'Squirtle', 'Mew'],
            comidas: ['Pizza', 'Hamburguesa', 'Pasta', 'Tacos', 'Sushi', 'Pollo asado', 'Sopa'],
            equipos: ['Barcelona', 'Real Madrid', 'Manchester United', 'Liverpool', 'Bayern'],
            rupaulUSA: ['Akashia', 'BeBe Zahara Benet', 'Jade Sotomayor', 'Nina Flowers', 'Ongina', 'Rebecca Glasscock', 'Shannel', 'Tammie Brown'],
            rupaulUK: ['Baga Chipz', 'Blu Hydrangea', 'Cheryl Hole', 'Crystal', 'Divina De Campo', 'Gothy Kendoll', 'Scaredy Kat', 'Sum Ting Wong', 'Vinegar Strokes', 'The Vivienne'],
            aleatorio: [],
            dificil: [],
            // Agrega más categorías si lo necesitas
        };

        categories.aleatorio = Object.values(categories).flat();

        categories.dificil = categories.aleatorio.concat(['Modo Difícil Ronda 1', 'Modo Difícil Ronda 2']);

        let currentRound = [];
        let nextRound = [];
        let eliminated = [];
        let top3 = [];
        let isGameOver = false;

        document.getElementById('categories').addEventListener('change', function () {
            document.getElementById('start-btn').disabled = !this.value;
            document.getElementById('error-message').style.display = 'none';
        });

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startGame() {
            const selectedCategory = document.getElementById('categories').value;
            if (!selectedCategory) {
                document.getElementById('error-message').style.display = 'block';
                return;
            }

            currentRound = shuffleArray([...categories[selectedCategory]]);
            nextRound = [];
            eliminated = [];
            top3 = [];
            isGameOver = false;

            if (currentRound.length === 0) {
                alert('No hay opciones en esta categoría.');
                resetGame();
                return;
            }

            document.getElementById('game-area').style.display = 'flex';
            document.getElementById('category-selector').style.display = 'none';

            startNextMatch();
        }

        function showRoundMessage() {
            const message = document.getElementById('round-message');
            message.style.display = 'block';
            message.classList.add('fade-in');
            setTimeout(() => {
                message.style.display = 'none';
            }, 3000);
        }

        function startNextMatch() {
            if (currentRound.length === 0 && nextRound.length === 1) {
                showWinner(nextRound[0]);
                return;
            } else if (currentRound.length === 0) {
                currentRound = shuffleArray([...nextRound]);
                nextRound = [];
                showRoundMessage();
            }

            if (currentRound.length >= 2) {
                const option1 = currentRound.shift();
                const option2 = currentRound.shift();
                displayOptions(option1, option2);
            } else {
                nextRound.push(currentRound.shift());
                startNextMatch();
            }
        }

        function displayOptions(option1, option2) {
            document.getElementById('option1').innerHTML = option1;
            document.getElementById('option2').innerHTML = option2;
        }

        function selectOption(selectedOption) {
            const selectedText = document.getElementById(selectedOption).innerHTML;
            const otherOption = selectedOption === 'option1' ? document.getElementById('option2').innerHTML : document.getElementById('option1').innerHTML;

            nextRound.push(selectedText);
            eliminated.push(otherOption);

            // Feedback visual y sonoro
            playSelectSound();
            animateSelection(selectedOption);

            startNextMatch();
        }

        function playSelectSound() {
            const sound = document.getElementById('select-sound');
            sound.play();
        }

        function animateSelection(selectedOption) {
            const card = document.getElementById(selectedOption);
            card.classList.add('selected-card');
            setTimeout(() => {
                card.classList.remove('selected-card');
            }, 1000);
        }

        function showWinner(winner) {
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('winner-screen').style.display = 'block';
            document.getElementById('winner-name').innerHTML = winner;

            // Mostrar el top 3
            const finalistsList = document.getElementById('finalists-list');
            finalistsList.innerHTML = top3.slice(0, 3).map(finalist => `<li>${finalist}</li>`).join('');

            // Mostrar eliminados
            const eliminatedList = document.getElementById('eliminated-list');
            eliminatedList.innerHTML = eliminated.map(el => `<li>${el}</li>`).join('');
        }

        function resetGame() {
            document.getElementById('category-selector').style.display = 'block';
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('winner-screen').style.display = 'none';
        }
    </script>
</body>
</html>

